<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Github Pages for Static Sites&nbsp;|&nbsp;Suyog's Blog</title>
<meta name=title content="Github Pages for Static Sites"><meta name=description content="Intro
Writing a static site has gotten significantly more difficult than &ldquo;upload a .html file to a shared host&rdquo; in the 90s.
This post is talking about how I setup this blog to be hosted on Github Pages and used a Github Action to update on every push to master. It uses Gatsby as the static site generator and I started with a template that lets me use mdx in my posts for interactive React content."><meta name=keywords content="experiments,"><meta property="og:url" content="https://suyogs.com/p/experiments/github-pages-for-static-sites/"><meta property="og:site_name" content="Suyog's Blog"><meta property="og:title" content="Github Pages for Static Sites"><meta property="og:description" content="Intro Writing a static site has gotten significantly more difficult than “upload a .html file to a shared host” in the 90s.
This post is talking about how I setup this blog to be hosted on Github Pages and used a Github Action to update on every push to master. It uses Gatsby as the static site generator and I started with a template that lets me use mdx in my posts for interactive React content."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2019-11-28T00:00:00+00:00"><meta property="article:modified_time" content="2019-11-28T00:00:00+00:00"><meta property="article:tag" content="Experiments"><meta name=twitter:card content="summary"><meta name=twitter:title content="Github Pages for Static Sites"><meta name=twitter:description content="Intro Writing a static site has gotten significantly more difficult than “upload a .html file to a shared host” in the 90s.
This post is talking about how I setup this blog to be hosted on Github Pages and used a Github Action to update on every push to master. It uses Gatsby as the static site generator and I started with a template that lets me use mdx in my posts for interactive React content."><meta itemprop=name content="Github Pages for Static Sites"><meta itemprop=description content="Intro Writing a static site has gotten significantly more difficult than “upload a .html file to a shared host” in the 90s.
This post is talking about how I setup this blog to be hosted on Github Pages and used a Github Action to update on every push to master. It uses Gatsby as the static site generator and I started with a template that lets me use mdx in my posts for interactive React content."><meta itemprop=datePublished content="2019-11-28T00:00:00+00:00"><meta itemprop=dateModified content="2019-11-28T00:00:00+00:00"><meta itemprop=wordCount content="682"><meta itemprop=keywords content="Experiments"><meta name=referrer content="no-referrer-when-downgrade"><link href=/bundle.min.css rel=stylesheet></head><body><header><nav><a href=/>Home</a>
<a href=/about/>About</a>
<a href=/index.xml><svg class="icon" viewBox="0 0 448 512"><path d="M0 64C0 46.3 14.3 32 32 32c229.8.0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7.0 64zM0 416a64 64 0 11128 0A64 64 0 110 416zM32 160c159.1.0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7.0-32-14.3-32-32s14.3-32 32-32z"/></svg>
RSS</a></nav><h1>Github Pages for Static Sites</h1></header><main><p><i><time style=color:var(--text-light) datetime=2019-11-28 pubdate>Nov 28, 2019</time></i></p><content><h1 id=intro>Intro</h1><p>Writing a static site has gotten significantly more difficult than &ldquo;upload a .html file to a shared host&rdquo; in the 90s.</p><p>This post is talking about how I setup <a href=https://suyogs.com/ target=_blank>this</a> <a href=https://github.com/flux159/blog target=_blank>blog</a> to be hosted on Github Pages and used a Github Action to update on every push to master. It uses <a href=https://www.gatsbyjs.org/ target=_blank>Gatsby</a> as the static site generator and I started with a <a href=https://www.gatsbyjs.org/starters/hasura/gatsby-gitbook-starter/ target=_blank>template</a> that lets me use <a href=https://github.com/mdx-js/mdx target=_blank>mdx</a> in my posts for interactive React content.</p><p>Some of the nice parts of this setup is that I can update the markdown content via the Github online editor (works on mobile and in any browser). Since the Github Action is setup to continuously deploy a new build on every commit to master, I don&rsquo;t need to clone, build, and redeploy on a local machine.</p><h1 id=setup>Setup</h1><p>On a Mac, get <a href=https://nodejs.org/en/ target=_blank>Node.js</a> and <a href=https://yarnpkg.com/lang/en/ target=_blank>Yarn</a> installed. You probably need <a href=http://osxdaily.com/2014/02/12/install-command-line-tools-mac-os-x/ target=_blank>Xcode tools</a> for git and other tools as well.</p><p>Setup global modules for node.js by creating a .npm-global directory as described <a href=https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally target=_blank>here</a>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>npm i -g gatsby-cli
</span></span><span class=line><span class=cl>mkdir -p ~/Projects/gatsbysites
</span></span><span class=line><span class=cl>gatsby new gatsby-gitbook-starter https://github.com/hasura/gatsby-gitbook-starter
</span></span><span class=line><span class=cl><span class=nb>cd</span> ./gatsby-gitbook-starter
</span></span><span class=line><span class=cl>gatsby develop</span></span></code></pre></div><p>I made a bunch of changes to the config.js file and did some work to change the theme of the site from a purple hue to a blue hue.</p><p>Then I tested out a static build by doing the following:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>yarn build
</span></span><span class=line><span class=cl><span class=nb>cd</span> ./public <span class=o>&amp;&amp;</span> python -m http.server</span></span></code></pre></div><h1 id=github-pages-and-github-actions>Github Pages and Github Actions</h1><p>Once I knew that a static build would work, I wanted to setup the site so that it could be published to <a href=https://pages.github.com/ target=_blank>Github Pages</a>.</p><p>I created a new public repo on Github, and added my changes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl> git remote add origin &lt;remote repo URL&gt;
</span></span><span class=line><span class=cl> git push -u origin master</span></span></code></pre></div><p>Then I wanted to setup Github Pages to automatically publish to the <a href=https://help.github.com/en/github/working-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site target=_blank>gh-pages branch</a>. I saw that there already existed an <a href=https://github.com/enriikke/gatsby-gh-pages-action target=_blank>action</a> to do that, so I added it to a workflow .yml file in my repo:</p><p><code>&lt;repo>/.github/workflows/main.yml</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Gatsby Publish</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>enriikke/gatsby-gh-pages-action@2.1.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>access-token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.ACCESS_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>deploy-branch</span><span class=p>:</span><span class=w> </span><span class=l>gh-pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>gatsby-args</span><span class=p>:</span><span class=w> </span>--<span class=l>prefix-paths</span></span></span></code></pre></div><p>The only thing to note here is that there&rsquo;s a secrets.ACCESS_TOKEN that is specified in the file.</p><p>To create this token, you want to create a <a href=https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line target=_blank>personal access token</a> with the <strong>repo</strong> permissions.</p><p>Then in your Repo&rsquo;s Settings, go to <a href=https://help.github.com/en/actions/automating-your-workflow-with-github-actions/creating-and-using-encrypted-secrets target=_blank>Secrets</a> and create a secret named &ldquo;ACCESS_TOKEN&rdquo; with the personal access token you just created.</p><p>Now if you make a new change on master and push to the repo, it should automatically publish to the gh-pages branch.</p><p>NOTE: Make sure that your Github repository settings have gh-pages as the branch you want to host pages from.</p><h1 id=setting-up-dns>Setting up DNS</h1><p>Once I had the gh-pages branch setup and autodeploying my changes on commit, I wanted to do one last thing to setup my personal blog - configure my DNS Nameservers to point to Github.</p><p>I use <a href=https://www.namecheap.com/ target=_blank>Namecheap</a> as my Domain Name Provider, so I followed Github&rsquo;s <a href=https://help.github.com/en/github/working-with-github-pages/managing-a-custom-domain-for-your-github-pages-site target=_blank>instructions</a> on how to properly setup my A records.</p><p>I also needed to add a <code>CNAME</code> file in my master branch with the name of my site <a href=https://suyogs.com target=_blank>suyogs.com</a>.</p><p>After the DNS changes propagated, I was able to go to <a href=https://suyogs.com target=_blank>https://suyogs.com</a> and it showed my Github Pages site!</p><h1 id=additions>Additions</h1><p>I cleaned up some of the CSS and headers that I didn&rsquo;t need from the starter template (and changed the color scheme to use a blue hue).</p><p>I also removed the need for Jquery and Bootstrap js by making the mobile navigation use React instead. Also made sure that the site <strong>mostly</strong> worked without Javascript (obvious things like mobile dropdown and live mode JS code don&rsquo;t work).</p><h1 id=todos>Todos</h1><ul><li>I still need to add commenting and social sharing to the site to allow it to be more interactive and easily shareable. <a href=https://www.gatsbyjs.org/docs/adding-comments/ target=_blank>Gatsby</a> has a number of solutions for adding commenting to the site.</li><li><a href=https://swas.io/blog/social-share-button-for-gatsby-blog-pages/ target=_blank>React Share</a> is an option for adding social sharing.</li><li>Adding an index page with <a href=https://www.gatsbyjs.org/docs/adding-pagination/ target=_blank>pagination</a> along with an <a href=https://www.gatsbyjs.org/docs/adding-an-rss-feed/ target=_blank>RSS feed</a> would make the site more accessible to read from other sources.</li></ul><h1 id=references>References</h1><ul><li><a href=https://www.gatsbyjs.org/ target=_blank>https://www.gatsbyjs.org/</a></li><li><a href=https://pages.github.com/ target=_blank>https://pages.github.com/</a></li><li><a href=https://github.com/features/actions target=_blank>https://github.com/features/actions</a></li><li><a href=https://help.github.com/en/actions/automating-your-workflow-with-github-actions/creating-and-using-encrypted-secrets target=_blank>https://help.github.com/en/actions/automating-your-workflow-with-github-actions/creating-and-using-encrypted-secrets</a></li><li><a href=https://medium.com/@hossainkhan/using-custom-domain-for-github-pages-86b303d3918a target=_blank>https://medium.com/@hossainkhan/using-custom-domain-for-github-pages-86b303d3918a</a></li><li><a href=https://help.github.com/en/github/working-with-github-pages/managing-a-custom-domain-for-your-github-pages-site target=_blank>https://help.github.com/en/github/working-with-github-pages/managing-a-custom-domain-for-your-github-pages-site</a></li></ul></content><p><a href=/tags/experiments/>#Experiments</a>&nbsp;&nbsp;</p></main><footer><span>© 2019-2025 Suyog Sonwalkar</span></footer></body></html>