<!doctype html><html lang=en-us>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Experiment working with QEMU and Tinycore linux on a Mac.
Setup On a Mac, get QEMU by using Homebrew
brew install qemu Download Core-current.iso and TinyCore-current.iso from Tinycore&amp;rsquo;s website. For the experiment below, they are located in my Downloads folder ~/Downloads/.
Experiment mkdir qemutests cd qemutests qemu-img create tinycore.img 512M qemu-system-x86_64 -hda tinycore.img -m 512 -cdrom ~/Downloads/Core-current.iso -boot d -net nic -net user,hostfwd=tcp:127.0.0.1:8008-:80 Note that you must have that second -net command to download things properly."><title>QEMU and Tinycore Linux</title>
<link rel=canonical href=https://flux159.github.io/hugoblog/p/experiments/qemu-and-tinycore/>
<link rel=stylesheet href=/hugoblog/scss/style.min.775dbd4fd34fda61c5273b4bc3415f7c9666414fb6c40aab164a7ded4397da98.css><meta property="og:title" content="QEMU and Tinycore Linux">
<meta property="og:description" content="Experiment working with QEMU and Tinycore linux on a Mac.
Setup On a Mac, get QEMU by using Homebrew
brew install qemu Download Core-current.iso and TinyCore-current.iso from Tinycore&amp;rsquo;s website. For the experiment below, they are located in my Downloads folder ~/Downloads/.
Experiment mkdir qemutests cd qemutests qemu-img create tinycore.img 512M qemu-system-x86_64 -hda tinycore.img -m 512 -cdrom ~/Downloads/Core-current.iso -boot d -net nic -net user,hostfwd=tcp:127.0.0.1:8008-:80 Note that you must have that second -net command to download things properly.">
<meta property="og:url" content="https://flux159.github.io/hugoblog/p/experiments/qemu-and-tinycore/">
<meta property="og:site_name" content="Suyog's Blog">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="experiments"><meta property="article:published_time" content="2019-11-28T00:00:00+00:00"><meta property="article:modified_time" content="2019-11-28T00:00:00+00:00"><meta property="og:image" content="https://flux159.github.io/hugoblog/images/qemu_and_tinycore_linux/qemu.png">
<meta name=twitter:title content="QEMU and Tinycore Linux">
<meta name=twitter:description content="Experiment working with QEMU and Tinycore linux on a Mac.
Setup On a Mac, get QEMU by using Homebrew
brew install qemu Download Core-current.iso and TinyCore-current.iso from Tinycore&amp;rsquo;s website. For the experiment below, they are located in my Downloads folder ~/Downloads/.
Experiment mkdir qemutests cd qemutests qemu-img create tinycore.img 512M qemu-system-x86_64 -hda tinycore.img -m 512 -cdrom ~/Downloads/Core-current.iso -boot d -net nic -net user,hostfwd=tcp:127.0.0.1:8008-:80 Note that you must have that second -net command to download things properly."><meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://flux159.github.io/hugoblog/images/qemu_and_tinycore_linux/qemu.png">
</head>
<body class="article-page has-toc">
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"auto")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex
extended">
<div id=article-toolbar>
<a href=/hugoblog class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg>
<span>Back</span>
</a>
</div>
<main class="main full-width">
<article class="has-image main-article">
<header class=article-header>
<div class=article-image>
<a href=/hugoblog/p/experiments/qemu-and-tinycore/>
<img src=/hugoblog/images/qemu_and_tinycore_linux/qemu.png loading=lazy alt="Featured image of post QEMU and Tinycore Linux">
</a>
</div>
<div class=article-details>
<header class=article-category>
<a href=/hugoblog/categories/experiments/ style=background-color:#2a9d8f;color:#fff>
Experiments
</a>
</header>
<h2 class=article-title>
<a href=/hugoblog/p/experiments/qemu-and-tinycore/>QEMU and Tinycore Linux</a>
</h2>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Nov 28, 2019</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
3 minute read
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<p>Experiment working with QEMU and Tinycore linux on a Mac.</p>
<h1 id=setup>Setup</h1>
<p>On a Mac, get <a class=link href=https://www.qemu.org/ target=_blank rel=noopener>QEMU</a> by using <a class=link href=https://brew.sh/ target=_blank rel=noopener>Homebrew</a></p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell>brew install qemu
</code></pre></div><p>Download Core-current.iso and TinyCore-current.iso from Tinycore&rsquo;s <a class=link href=http://tinycorelinux.net/downloads.html target=_blank rel=noopener>website</a>. For the experiment below, they are located in my Downloads folder <code>~/Downloads/</code>.</p>
<h1 id=experiment>Experiment</h1>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell>mkdir qemutests
<span class=nb>cd</span> qemutests 
qemu-img create tinycore.img 512M
qemu-system-x86_64 -hda tinycore.img -m <span class=m>512</span> -cdrom ~/Downloads/Core-current.iso -boot d -net nic -net user,hostfwd<span class=o>=</span>tcp:127.0.0.1:8008-:80
</code></pre></div><p>Note that you <strong>must</strong> have that second -net command to download things properly.</p>
<p>Qemu will open up a window and booting from the iso should only take 10 seconds.</p>
<p>If you logout, there’s a user with the name “tc” that you can login as again.</p>
<p>If you sudo reboot right now before following the &ldquo;install&rdquo; instructions below, you will lose all data in the VM since the entire OS is running in memory and is not persisted to the qemu-img disk you created earlier.</p>
<h2 id=extensions>Extensions</h2>
<p>To download extensions (like packages in Ubuntu or CentOS), you can use <a class=link href=http://wiki.tinycorelinux.net/wiki:tce-load target=_blank rel=noopener>tce-load</a>.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell>tce-load -iw vim
tce-load -iw python3.6-dev
</code></pre></div><p>Note that I was having multiple issues around md5sum mismatches when installing extensions using tce-load. This happened for both the shell based Core and GUI based TinyCore.</p>
<p>You can partially get around the md5 check by using tce-fetch, but this is not recommended for most non-experimental purposes.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell>tce-fetch.sh gvim.gcz
tce-load -i gvim.gcz
</code></pre></div><p>In my few hours of experimenting, I wasn&rsquo;t able to find out a good fix for the md5sum issues. Feel free to leave an <a class=link href=https://github.com/Flux159/blog/issues target=_blank rel=noopener>issue</a> on my blog&rsquo;s github if you&rsquo;re able to find a fix.</p>
<h2 id=installing-to-disk>Installing to Disk</h2>
<p>This is mainly following TinyCore&rsquo;s <a class=link href=http://tinycorelinux.net/install_manual.html target=_blank rel=noopener>install manual</a> for making a bootable hard drive w/ tiny core rather than just the iso booting in QEMU.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell>tce-load -wi cfdisk
tce-load -wi grub-0.97-splash
sudo su
fdisk -l <span class=o>(</span>should show /dev/sda - which will be used <span class=k>for</span> following commands<span class=o>)</span>
cfdisk /dev/sda

<span class=c1># The following is in the cfdisk terminal interface</span>
<span class=o>[</span>New<span class=o>]</span> <span class=o>[</span>Primary<span class=o>]</span> <span class=o>[</span>Enter <span class=k>for</span> default<span class=o>]</span> <span class=o>[</span>Beginning<span class=o>]</span> <span class=o>[</span>Bootable - <span class=k>select</span> this<span class=o>]</span>
<span class=o>[</span>Write<span class=o>]</span>
yes
<span class=o>[</span>Quit<span class=o>]</span>

mkfs.ext3 /dev/sda1
rebuildfstab

mount /mnt/sda1
mkdir -p /mnt/sda1/boot/grub

<span class=c1># Mount the original boot media (the disk) - it was at /dev/sr0 (just did cat /etc/fstab to check):</span>
mount /mnt/sr0
cp -p /mnt/sr0/boot/* /mnt/sda1/boot/
mkdir -p /mnt/sda1/tce
touch /mnt/sda1/tce/mydata.tgz

cp -p /usr/lib/grub/i386-pc/* /mnt/hda1/boot/grub/
vi /mnt/hda1/boot/grub/menu.lst

<span class=c1># Type “i”, insert the following (note that the install_manual is out of date - follow this: http://forum.tinycorelinux.net/index.php?topic=15713.0):</span>

default <span class=m>0</span>
timeout <span class=m>10</span>
title tinycore
kernel /boot/vmlinuz quiet
initrd /boot/core.gz

<span class=c1># Use Esc + :wq to save the file and quit</span>

grub
root <span class=o>(</span>hd0,0<span class=o>)</span>
setup <span class=o>(</span>hd0<span class=o>)</span>
quit

umount /mnt/hdc
eject /dev/hdc

reboot
</code></pre></div><p>Note that cfdisk, etc. have been deleted because they were installed on the temporary iso, but now that you’ve installed to disk, the next time you run qemu, you can just boot from disk:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell>qemu-system-x86_64 -hda tinycore.img -m <span class=m>512</span> -boot d -net nic -net user,hostfwd<span class=o>=</span>tcp:127.0.0.1:8009-:80 
</code></pre></div><h1 id=references>References</h1>
<ul>
<li><a class=link href=http://tinycorelinux.net/faq.html target=_blank rel=noopener>http://tinycorelinux.net/faq.html</a> - Tinycore&rsquo;s FAQ</li>
<li><a class=link href=http://tinycorelinux.net/install_manual.html target=_blank rel=noopener>http://tinycorelinux.net/install_manual.html</a> - Tinycore&rsquo;s Install Manual</li>
<li><a class=link href="http://forum.tinycorelinux.net/index.php?topic=15713.0" target=_blank rel=noopener>http://forum.tinycorelinux.net/index.php?topic=15713.0</a> - Forum post about changes to grub configuration</li>
<li><a class=link href=https://jon.sprig.gs/blog/post/53 target=_blank rel=noopener>https://jon.sprig.gs/blog/post/53</a> - useful to start experimenting with Qemu arguments</li>
</ul>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/hugoblog/tags/experiments/>experiments</a>
</section>
<section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span>
</section>
</footer>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title>Related contents</h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article class=has-image>
<a href=/hugoblog/p/experiments/next-js-with-postgraphile/>
<div class=article-image>
<img src=/hugoblog/images/nextjs_postgraphile/postgraphile.png loading=lazy data-key=/experiments/next-js-with-postgraphile data-hash=/hugoblog/images/nextjs_postgraphile/postgraphile.png>
</div>
<div class=article-details>
<h2 class=article-title>Next.js with Postgraphile</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/hugoblog/p/experiments/windows-gaming-pc-on-aws/>
<div class=article-image>
<img src=/hugoblog/images/windows_gaming_aws/steam.png loading=lazy data-key=/experiments/windows-gaming-pc-on-aws data-hash=/hugoblog/images/windows_gaming_aws/steam.png>
</div>
<div class=article-details>
<h2 class=article-title>Create your own Windows Gaming PC on AWS</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/hugoblog/p/experiments/vscode-online-with-aws/>
<div class=article-image>
<img src=/hugoblog/images/vscode_online/vscode.png loading=lazy data-key=/experiments/vscode-online-with-aws data-hash=/hugoblog/images/vscode_online/vscode.png>
</div>
<div class=article-details>
<h2 class=article-title>VSCode Online with AWS</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/hugoblog/p/experiments/github-pages-for-static-sites/>
<div class=article-image>
<img src=/hugoblog/images/github_pages/github_pages_cropped.png loading=lazy data-key=/experiments/github-pages-for-static-sites data-hash=/hugoblog/images/github_pages/github_pages_cropped.png>
</div>
<div class=article-details>
<h2 class=article-title>Github Pages for Static Sites</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/hugoblog/p/experiments/titanic-dataset/>
<div class=article-image>
<img src=/hugoblog/images/titanic_dataset/titanic.jpeg loading=lazy data-key=/experiments/titanic-dataset data-hash=/hugoblog/images/titanic_dataset/titanic.jpeg>
</div>
<div class=article-details>
<h2 class=article-title>Titanic Dataset</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<footer class=site-footer>
<section class=copyright>
&copy;
2020 -
2022 Suyog's Blog
</section>
<section class=powerby>
Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> <br>
Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.6.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a>
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">Table of contents</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ol>
<li><a href=#extensions>Extensions</a></li>
<li><a href=#installing-to-disk>Installing to Disk</a></li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/hugoblog/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>