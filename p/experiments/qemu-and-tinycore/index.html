<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>QEMU and Tinycore Linux&nbsp;|&nbsp;Suyog's Blog</title>
<meta name=title content="QEMU and Tinycore Linux"><meta name=description content="Experiment working with QEMU and Tinycore linux on a Mac.
Setup
On a Mac, get QEMU by using Homebrew






brew install qemu
Download Core-current.iso and TinyCore-current.iso from Tinycore&rsquo;s website. For the experiment below, they are located in my Downloads folder ~/Downloads/.
Experiment






mkdir qemutests
cd qemutests 
qemu-img create tinycore.img 512M
qemu-system-x86_64 -hda tinycore.img -m 512 -cdrom ~/Downloads/Core-current.iso -boot d -net nic -net user,hostfwd=tcp:127.0.0.1:8008-:80
Note that you must have that second -net command to download things properly."><meta name=keywords content="experiments,"><meta property="og:url" content="https://suyogs.com/p/experiments/qemu-and-tinycore/"><meta property="og:site_name" content="Suyog's Blog"><meta property="og:title" content="QEMU and Tinycore Linux"><meta property="og:description" content="Experiment working with QEMU and Tinycore linux on a Mac.
Setup On a Mac, get QEMU by using Homebrew
brew install qemu Download Core-current.iso and TinyCore-current.iso from Tinycore’s website. For the experiment below, they are located in my Downloads folder ~/Downloads/.
Experiment mkdir qemutests cd qemutests qemu-img create tinycore.img 512M qemu-system-x86_64 -hda tinycore.img -m 512 -cdrom ~/Downloads/Core-current.iso -boot d -net nic -net user,hostfwd=tcp:127.0.0.1:8008-:80 Note that you must have that second -net command to download things properly."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2019-11-28T00:00:00+00:00"><meta property="article:modified_time" content="2019-11-28T00:00:00+00:00"><meta property="article:tag" content="Experiments"><meta name=twitter:card content="summary"><meta name=twitter:title content="QEMU and Tinycore Linux"><meta name=twitter:description content="Experiment working with QEMU and Tinycore linux on a Mac.
Setup On a Mac, get QEMU by using Homebrew
brew install qemu Download Core-current.iso and TinyCore-current.iso from Tinycore’s website. For the experiment below, they are located in my Downloads folder ~/Downloads/.
Experiment mkdir qemutests cd qemutests qemu-img create tinycore.img 512M qemu-system-x86_64 -hda tinycore.img -m 512 -cdrom ~/Downloads/Core-current.iso -boot d -net nic -net user,hostfwd=tcp:127.0.0.1:8008-:80 Note that you must have that second -net command to download things properly."><meta itemprop=name content="QEMU and Tinycore Linux"><meta itemprop=description content="Experiment working with QEMU and Tinycore linux on a Mac.
Setup On a Mac, get QEMU by using Homebrew
brew install qemu Download Core-current.iso and TinyCore-current.iso from Tinycore’s website. For the experiment below, they are located in my Downloads folder ~/Downloads/.
Experiment mkdir qemutests cd qemutests qemu-img create tinycore.img 512M qemu-system-x86_64 -hda tinycore.img -m 512 -cdrom ~/Downloads/Core-current.iso -boot d -net nic -net user,hostfwd=tcp:127.0.0.1:8008-:80 Note that you must have that second -net command to download things properly."><meta itemprop=datePublished content="2019-11-28T00:00:00+00:00"><meta itemprop=dateModified content="2019-11-28T00:00:00+00:00"><meta itemprop=wordCount content="495"><meta itemprop=keywords content="Experiments"><meta name=referrer content="no-referrer-when-downgrade"><link href=/bundle.min.css rel=stylesheet></head><body><header><nav><a href=/>Home</a>
<a href=/about/>About</a>
<a href=/index.xml><svg class="icon" viewBox="0 0 448 512"><path d="M0 64C0 46.3 14.3 32 32 32c229.8.0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7.0 64zM0 416a64 64 0 11128 0A64 64 0 110 416zM32 160c159.1.0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7.0-32-14.3-32-32s14.3-32 32-32z"/></svg>
RSS</a></nav><h1>QEMU and Tinycore Linux</h1></header><main><p><i><time style=color:var(--text-light) datetime=2019-11-28 pubdate>Nov 28, 2019</time></i></p><content><p>Experiment working with QEMU and Tinycore linux on a Mac.</p><h1 id=setup>Setup</h1><p>On a Mac, get <a href=https://www.qemu.org/ target=_blank>QEMU</a> by using <a href=https://brew.sh/ target=_blank>Homebrew</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>brew install qemu</span></span></code></pre></div><p>Download Core-current.iso and TinyCore-current.iso from Tinycore&rsquo;s <a href=http://tinycorelinux.net/downloads.html target=_blank>website</a>. For the experiment below, they are located in my Downloads folder <code>~/Downloads/</code>.</p><h1 id=experiment>Experiment</h1><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>mkdir qemutests
</span></span><span class=line><span class=cl><span class=nb>cd</span> qemutests 
</span></span><span class=line><span class=cl>qemu-img create tinycore.img 512M
</span></span><span class=line><span class=cl>qemu-system-x86_64 -hda tinycore.img -m <span class=m>512</span> -cdrom ~/Downloads/Core-current.iso -boot d -net nic -net user,hostfwd<span class=o>=</span>tcp:127.0.0.1:8008-:80</span></span></code></pre></div><p>Note that you <strong>must</strong> have that second -net command to download things properly.</p><p>Qemu will open up a window and booting from the iso should only take 10 seconds.</p><p>If you logout, there’s a user with the name “tc” that you can login as again.</p><p>If you sudo reboot right now before following the &ldquo;install&rdquo; instructions below, you will lose all data in the VM since the entire OS is running in memory and is not persisted to the qemu-img disk you created earlier.</p><h2 id=extensions>Extensions</h2><p>To download extensions (like packages in Ubuntu or CentOS), you can use <a href=http://wiki.tinycorelinux.net/wiki:tce-load target=_blank>tce-load</a>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>tce-load -iw vim
</span></span><span class=line><span class=cl>tce-load -iw python3.6-dev</span></span></code></pre></div><p>Note that I was having multiple issues around md5sum mismatches when installing extensions using tce-load. This happened for both the shell based Core and GUI based TinyCore.</p><p>You can partially get around the md5 check by using tce-fetch, but this is not recommended for most non-experimental purposes.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>tce-fetch.sh gvim.gcz
</span></span><span class=line><span class=cl>tce-load -i gvim.gcz</span></span></code></pre></div><p>In my few hours of experimenting, I wasn&rsquo;t able to find out a good fix for the md5sum issues. Feel free to leave an <a href=https://github.com/Flux159/blog/issues target=_blank>issue</a> on my blog&rsquo;s github if you&rsquo;re able to find a fix.</p><h2 id=installing-to-disk>Installing to Disk</h2><p>This is mainly following TinyCore&rsquo;s <a href=http://tinycorelinux.net/install_manual.html target=_blank>install manual</a> for making a bootable hard drive w/ tiny core rather than just the iso booting in QEMU.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>tce-load -wi cfdisk
</span></span><span class=line><span class=cl>tce-load -wi grub-0.97-splash
</span></span><span class=line><span class=cl>sudo su
</span></span><span class=line><span class=cl>fdisk -l <span class=o>(</span>should show /dev/sda - which will be used <span class=k>for</span> following commands<span class=o>)</span>
</span></span><span class=line><span class=cl>cfdisk /dev/sda
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># The following is in the cfdisk terminal interface</span>
</span></span><span class=line><span class=cl><span class=o>[</span>New<span class=o>]</span> <span class=o>[</span>Primary<span class=o>]</span> <span class=o>[</span>Enter <span class=k>for</span> default<span class=o>]</span> <span class=o>[</span>Beginning<span class=o>]</span> <span class=o>[</span>Bootable - <span class=k>select</span> this<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=o>[</span>Write<span class=o>]</span>
</span></span><span class=line><span class=cl>yes
</span></span><span class=line><span class=cl><span class=o>[</span>Quit<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mkfs.ext3 /dev/sda1
</span></span><span class=line><span class=cl>rebuildfstab
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mount /mnt/sda1
</span></span><span class=line><span class=cl>mkdir -p /mnt/sda1/boot/grub
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Mount the original boot media (the disk) - it was at /dev/sr0 (just did cat /etc/fstab to check):</span>
</span></span><span class=line><span class=cl>mount /mnt/sr0
</span></span><span class=line><span class=cl>cp -p /mnt/sr0/boot/* /mnt/sda1/boot/
</span></span><span class=line><span class=cl>mkdir -p /mnt/sda1/tce
</span></span><span class=line><span class=cl>touch /mnt/sda1/tce/mydata.tgz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>cp -p /usr/lib/grub/i386-pc/* /mnt/hda1/boot/grub/
</span></span><span class=line><span class=cl>vi /mnt/hda1/boot/grub/menu.lst
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Type “i”, insert the following (note that the install_manual is out of date - follow this: http://forum.tinycorelinux.net/index.php?topic=15713.0):</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>default <span class=m>0</span>
</span></span><span class=line><span class=cl>timeout <span class=m>10</span>
</span></span><span class=line><span class=cl>title tinycore
</span></span><span class=line><span class=cl>kernel /boot/vmlinuz quiet
</span></span><span class=line><span class=cl>initrd /boot/core.gz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Use Esc + :wq to save the file and quit</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>grub
</span></span><span class=line><span class=cl>root <span class=o>(</span>hd0,0<span class=o>)</span>
</span></span><span class=line><span class=cl>setup <span class=o>(</span>hd0<span class=o>)</span>
</span></span><span class=line><span class=cl>quit
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>umount /mnt/hdc
</span></span><span class=line><span class=cl>eject /dev/hdc
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>reboot</span></span></code></pre></div><p>Note that cfdisk, etc. have been deleted because they were installed on the temporary iso, but now that you’ve installed to disk, the next time you run qemu, you can just boot from disk:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>qemu-system-x86_64 -hda tinycore.img -m <span class=m>512</span> -boot d -net nic -net user,hostfwd<span class=o>=</span>tcp:127.0.0.1:8009-:80 </span></span></code></pre></div><h1 id=references>References</h1><ul><li><a href=http://tinycorelinux.net/faq.html target=_blank>http://tinycorelinux.net/faq.html</a> - Tinycore&rsquo;s FAQ</li><li><a href=http://tinycorelinux.net/install_manual.html target=_blank>http://tinycorelinux.net/install_manual.html</a> - Tinycore&rsquo;s Install Manual</li><li><a href="http://forum.tinycorelinux.net/index.php?topic=15713.0" target=_blank>http://forum.tinycorelinux.net/index.php?topic=15713.0</a> - Forum post about changes to grub configuration</li><li><a href=https://jon.sprig.gs/blog/post/53 target=_blank>https://jon.sprig.gs/blog/post/53</a> - useful to start experimenting with Qemu arguments</li></ul></content><p><a href=/tags/experiments/>#Experiments</a>&nbsp;&nbsp;</p></main><footer><span>© 2019-2025 Suyog Sonwalkar</span></footer></body></html>